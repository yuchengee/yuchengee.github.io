<!doctype html>
<html lang="zh-CN" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">相同代码在不同平台产生不一样的结果! | 渔歌-yuchengee-成长为更强大的自己</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yuchengee.github.io/blog/java-image-diffres"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="相同代码在不同平台产生不一样的结果! | 渔歌-yuchengee-成长为更强大的自己"><meta data-rh="true" name="description" content="同一份java代码，在windows平台和linux平台运行结果竟然不一样，到底怎么回事！！！"><meta data-rh="true" property="og:description" content="同一份java代码，在windows平台和linux平台运行结果竟然不一样，到底怎么回事！！！"><meta data-rh="true" name="keywords" content="java,image,bug"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-03-22T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/yuchengee"><meta data-rh="true" property="article:tag" content="java,image,bug"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yuchengee.github.io/blog/java-image-diffres"><link data-rh="true" rel="alternate" href="https://yuchengee.github.io/blog/java-image-diffres" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://yuchengee.github.io/blog/java-image-diffres" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","1",{anonymize_ip:!0})</script>





<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6dfb38b0fcc241bcb4c7486723b10185";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="渔歌 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="渔歌 Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="渔歌 JSON Feed">
<meta name="description" content="渔歌的个人博客">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans@4.0.0/lib/Normal/MiSans-Normal.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans@4.0.0/lib/Normal/MiSans-Semibold.min.css"><link rel="stylesheet" href="/assets/css/styles.c47cd496.css">
<script src="/assets/js/runtime~main.1563bf99.js" defer="defer"></script>
<script src="/assets/js/main.5ca31769.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_NYV2" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_ruDu"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="yuchengee" class="themedComponent_TcKe themedComponent--light_eba_"><img src="/img/logo.png" alt="yuchengee" class="themedComponent_TcKe themedComponent--dark_CFQW"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/blog">👨‍💻 博客</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/blog/tags">标签</a></li><li><a class="dropdown__link" href="/blog/archive">归档</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/skill/">👨🏻‍🌾 笔记</a><a class="navbar__item navbar__link" href="/docs/interview/">👨‍🎓 面试</a><a class="navbar__item navbar__link" href="/docs/tools/">🛠 工具</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">📡 其他</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/project">项目</a></li><li><a class="dropdown__link" href="/resources">资源</a></li><li><a class="dropdown__link" href="/gpt">GPT</a></li></ul></div><div class="toggle_nuKp colorModeToggle_We2L"><button class="clean-btn toggleButton_VbXV toggleButtonDisabled_Ny53" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pOV_"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_N8qO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_roVj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_KS6g"><div class="container margin-vert--md"><div class="row"><aside class="col col--2"><nav class="sidebar_me8e thin-scrollbar" aria-label="最近博文导航" style="opacity:0"><div class="backButton_Rxyd"><span></span></div><a class="sidebarItemTitle_MDMA margin-bottom--sm" href="/blog">最近更新</a><ul class="sidebarItemList_t5AC clean-list"><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/springboot-dubbo-zk-demo">SpringBoot整合Dubbo3.0基础配置Demo</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/zookeeper-java-use">zookeeper的Java客户端基本使用</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/zookeeper-basic-use">zookeeper的基本使用</a></li><li class="sidebarItem_PSMt"><a aria-current="page" class="sidebarItemLink_nW7C sidebarItemLinkActive_hG8J" href="/blog/java-image-diffres">相同代码在不同平台产生不一样的结果!</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/java-simplify-geometry">Gis开发中的图形简化算法</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/java-htmlcode-transform">Html字符的转换</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/java-geotools-relep">geotools中的关  系表达式</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/java-out-pdf">Java输出PDF</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/java-build-run">普通java项目打jar包运行方式</a></li><li class="sidebarItem_PSMt"><a class="sidebarItemLink_nW7C" href="/blog/commons-io-filenameutils">commons-io中Filenameutils关于文件名的方法</a></li></ul></nav></aside><main class="col col--8" itemscope="" itemtype="h ttp://schema.org/Blog"><article class="article_y69D" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header style="position:relative;z-index:2"><h1 itemprop="headline">相同代码在不同平台产生不一样的结果!</h1><div class="container_iJTo margin-bottom--md"><div class="date_ZxYJ"><span></span><time datetime="2024-03-22T00:00:00.000Z" itemprop="datePublished" class="truncate">2024年3月22日</time></div><div class="tagInfo_Ym7h"><span></span><div class="truncate tagList_aAIV"><div><a class="tag_b1dr tagRegular_t85v tag" href="/blog/tags/java">java</a></div><div>/<a class="tag_b1dr tagRegular_t85v tag" href="/blog/tags/image">image</a></div><div>/<a class="tag_b1dr tagRegular_t85v tag" href="/blog/tags/bug">bug</a></div></div></div><div class="date_ZxYJ"><span></span><span class="truncate">阅读需 3 分钟</span></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody" style="position:relative"><p>同一份java代码，在windows平台和linux平台运行结果竟然不一样，到底怎么回事！！！</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_CN_B" id="背景">背景<a href="#背景" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h3>
<p>在某个下午，组内的开发接到一个需求，需要用java生成图片，是一个很简单的需求，所以开发很快就写出来了。然后在本地windows环境调试也没问题，于是就把代码换上了我们的测试环境。</p>
<p>  一套动作行云流水，然后开始测试。</p>
<p>万万没想到啊，本地正常的代码，在测试环境居然有bug。</p>
<p>不可能啊，没道理啊。</p>
<p>于是开发找到我，问我这是怎么回事。</p>
<p>我开始分析。下面我经过日志调试、数据提取分析简化后的代码。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_CN_B" id="简化后的代码">简化后的代码<a href="#简化后的代码" class="hash-link" aria-label="简化后的代码的直接链接" title="简化后的代码的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockTitle_P25_"><span></span>简化的代码<span style="flex:1;text-align:right">java</span></div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-java codeBlock_qGQc thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token import namespace">javax</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import namespace">imageio</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import class-name" style="color:hsl(35, 99%, 36%)">ImageIO</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token import namespace">java</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import namespace">awt</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import operator" style="color:hsl(221, 87%, 60%)">*</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token import namespace">java</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import namespace">awt</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import namespace">image</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import class-name" style="color:hsl(35, 99%, 36%)">BufferedImage</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token import namespace">java</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import namespace">io</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import class-name" style="color:hsl(35, 99%, 36%)">File</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> </span><span class="token import namespace">java</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import namespace">io</span><span class="token import namespace punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token import class-name" style="color:hsl(35, 99%, 36%)">IOException</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">class</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">ImageTest</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">public</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">static</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">main</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">String</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">throws</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">BufferedImage</span><span class="token plain"> bi </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">new</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">BufferedImage</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">256</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">256</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">BufferedImage</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token constant" style="color:hsl(35, 99%, 36%)">TYPE_INT_ARGB</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Graphics2D</span><span class="token plain"> g2d </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> bi</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">createGraphics</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">BasicStroke</span><span class="token plain"> dash </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">new</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">BasicStroke</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">5</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">BasicStroke</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token constant" style="color:hsl(35, 99%, 36%)">CAP_BUTT</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">BasicStroke</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token constant" style="color:hsl(35, 99%, 36%)">JOIN_MITER</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.5f</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">new</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">float</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">0f</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        g2d</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setStroke</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">dash</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        g2d</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setColor</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">Color</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token constant" style="color:hsl(35, 99%, 36%)">BLUE</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 设置抗锯齿</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        g2d</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">setRenderingHint</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token class-name" style="color:hsl(35, 99%, 36%)">RenderingHints</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token constant" style="color:hsl(35, 99%, 36%)">KEY_ANTIALIASING</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">RenderingHints</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token constant" style="color:hsl(35, 99%, 36%)">VALUE_ANTIALIAS_ON</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        g2d</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">drawLine</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token number" style="color:hsl(35, 99%, 36%)">39049</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">228094</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">105</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token number" style="color:hsl(35, 99%, 36%)">110</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">ImageIO</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token function" style="color:hsl(221, 87%, 60%)">write</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">bi</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;png&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">new</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(35, 99%, 36%)">File</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;/home/ressss.png&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>代码很简单，就是用java的 Graphics2D画一条直线。<strong>只是直线的端点数字比较大</strong>。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_CN_B" id="不同的结果">不同的结果<a href="#不同的结果" class="hash-link" aria-label="不同的结果的直接链接" title="不同的结果的直接链接">​</a></h3>
<p>windows下通过IDEA运行。linux下用javac编译，java运行。</p>
<p>windows下的输出结果
<img loading="lazy" alt="windows结果" src="data:image/png;base64,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" title="windows下正常" width="256" height="256" class="img_THfu"></p>
<p>linux下的输出结果，一条直线，居然会化成弯的！！
<img loading="lazy" alt="linux结果" src="data:image/png;base64,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" title="linux下异常" width="256" height="256" class="img_THfu"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_CN_B" id="分析">分析<a href="#分析" class="hash-link" aria-label="分析的直接链接" title="分析的直接链接">​</a></h3>
<p>经过多次测试发现，当线段的两个端点数字较小时，linux下可以输出正常的结果。当数字较大时，输出结果就有问题。</p>
<p>询问GPT，得到如下结果：
<img loading="lazy" alt="gpt的回答" src="/assets/images/0322-gpt-ans-fe3f9091628cd03d072e8eb9864e853d.png" title="gpt的回答" width="864" height="600" class="img_THfu"></p>
<p>java在不同平台的绘图算法不一样，gpt也提到抗锯齿和线条的粗细参数，这都有可能是造成bug的原因。</p>
<p>经过调试，发现不设置抗锯齿，也会出现线段弯曲，而且直线变得很粗糙。</p>
<p>当不设置 Graphics2D 的 stroke时，也就是去掉上面代码的高亮部分，可以得到正常结果。
<img loading="lazy" alt="linux结果" src="data:image/png;base64,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" title="linux下正常" width="256" height="256" class="img_THfu"></p>
<p>也就是说，问题出在 BasicStroke 上面。难道使用BasicStroke的方式不对？</p>
<p>修改上面代码，把设置线条轮廓改成
<code>g2d.setStroke(new BasicStroke(5));</code></p>
<p>也得到正常结果：
<img loading="lazy" alt="linux结果" src="data:image/png;base64,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" title="linux下正常" width="256" height="256" class="img_THfu"></p>
<p>原来是后面的参数，线段样式的原因。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_CN_B" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h3>
<p>后续了解到，该开发人员在我们代码中发现了有一个地方用到了设置 BasicStroke 线段样式的代码，于是直接拿过来用了，没想到出现这个问题。</p>
<p>我看了原来用到 BasicStroke 的地方，发现那个功能是用户要求使用丰富的线段样式，实线、虚线、线宽等不同线样式。所以这个地方用了这种详细的 BasicStroke参数。原来的需求也不会出现这种数据差异较大的情况，所以一直没有出现今天这种bug。</p>
<p>而新需求并不需要复杂的线段样式，只需要设置线宽就可以了。但该开发直接把这个代码搬过来，从而造成这个bug。</p>
<p>BasicStroke样式还是比较发杂。</p>
<p>所以还是不能盲目照搬，需要理解代码、理解需求、灵活运用，从而减少bug。</p>
<p>最后，还是没有搞懂，为啥linux下设置这种样式的线会出现这种奇怪的bug呢？等有时间了再好好分析吧。</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_CYj5"></footer></article><div class="margin-bottom--md"><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/zookeeper-basic-use"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">zookeeper的基本使用</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/java-simplify-geometry"><div class="pagination-nav__sublabel">较旧一篇</div><div class="pagination-nav__label">Gis开发中的图形简化算法</div></a></nav></div><div>Loading Comments...</div><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_bAnE" type="button"></button></main><div class="col col--2"><div class="tableOfContents_jeP5 thin-scrollbar" style="opacity:0;transform:translateX(100px) translateZ(0)"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#背景" class="table-of-contents__link toc-highlight">背景</a></li><li><a href="#简化后的代码" class="table-of-contents__link toc-highlight">简化后的代码</a></li><li><a href="#不同的结果" class="table-of-contents__link toc-highlight">不同的结果</a></li><li><a href="#分析" class="table-of-contents__link toc-highlight">分析</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul><hr class="hr_UhE0"><span class="percent_H6RK">0%<!-- --> </span></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">学习</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">博客</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/archive">归档</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/skill">技术笔记</a></li></ul></div><div class="col footer__col"><div class="footer__title">社交媒体</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">关于我</a></li><li class="footer__item"><a href="https://github.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wX1q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juejin.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">掘金<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wX1q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://yuchee.gitee.io/xiaoyouxi" target="_blank" rel="noopener noreferrer" class="footer__link-item">H5小游戏<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wX1q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://yuchee.gitee.io/alittle/tetris" target="_blank" rel="noopener noreferrer" class="footer__link-item">俄罗斯方块<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wX1q"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                <a href="https://docusaurus.io/zh-CN/" target="_blank" rel="noreferrer noopener">
                  <img src="/img/buildwith.png" alt="build with docusaurus" width="120" height="50">
                <a>
                </a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <p style="margin-bottom: 0;"><a href="http://beian.miit.gov.cn/">XX备XXXXXX号-2</a></p>
        <p style="display: inline-flex; align-items: center;"><img style="height:20px;margin-right: 0.5rem;" src="/img/police.png" alt="police" height="20"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=undefined">XX网安备XXXXXXXXXX号</a></p>
        <p>Copyright © 2022 - PRESENT 渔歌 Built with Docusaurus.</p>
        </div></div></div></footer></div>
</body>
</html>