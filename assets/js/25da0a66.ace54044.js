"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[8760],{82906:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var a=t(13274),l=t(79779);const r={slug:"linux-cmd-useage",title:"linux\u5e38\u7528\u547d\u4ee4",date:new Date("2023-02-15T00:00:00.000Z"),authors:"yuchengee",tags:["linux"]},i=void 0,d={permalink:"/blog/linux-cmd-useage",editUrl:"https://github.com/yuchengee/blog/edit/master/blog/2023/02-15-linux\u5e38\u7528\u547d\u4ee4.md",source:"@site/blog/2023/02-15-linux\u5e38\u7528\u547d\u4ee4.md",title:"linux\u5e38\u7528\u547d\u4ee4",description:"linux\u5e38\u7528\u547d\u4ee4",date:"2023-02-15T00:00:00.000Z",formattedDate:"2023\u5e742\u670815\u65e5",tags:[{label:"linux",permalink:"/blog/tags/linux"}],readingTime:3.42,hasTruncateMarker:!0,authors:[{name:"yuchengee",title:"\u5e9f\u54c1\u5de5\u7a0b\u5e08",url:"https://github.com/yuchengee",imageURL:"/img/logo.png",key:"yuchengee"}],frontMatter:{slug:"linux-cmd-useage",title:"linux\u5e38\u7528\u547d\u4ee4",date:"2023-02-15T00:00:00.000Z",authors:"yuchengee",tags:["linux"]},unlisted:!1,prevItem:{title:"kafka\u5b89\u88c5\u4e0e\u7b80\u5355\u4f7f\u7528",permalink:"/blog/kafka-useage"},nextItem:{title:"docker\u4f7f\u7528\u6307\u5357",permalink:"/blog/docker-useage"}},s={authorsImageUrls:[void 0]},c=[{value:"1. \u89e3\u538b\u6253\u5305",id:"1-\u89e3\u538b\u6253\u5305",level:3},{value:"2. \u67e5\u770b\u65e5\u5fd7",id:"2-\u67e5\u770b\u65e5\u5fd7",level:3},{value:"3. \u67e5\u770b\u7cfb\u7edf\u4fe1\u606f",id:"3-\u67e5\u770b\u7cfb\u7edf\u4fe1\u606f",level:3},{value:"4. \u4fee\u6539\u65f6\u95f4",id:"4-\u4fee\u6539\u65f6\u95f4",level:3},{value:"5. \u7528\u6237",id:"5-\u7528\u6237",level:3},{value:"6. \u7aef\u53e3",id:"6-\u7aef\u53e3",level:3},{value:"7. \u6587\u4ef6",id:"7-\u6587\u4ef6",level:3},{value:"8. \u9632\u706b\u5899",id:"8-\u9632\u706b\u5899",level:3},{value:"9. curl",id:"9-curl",level:3},{value:"10. \u670d\u52a1\u5668\u5b57\u4f53",id:"10-\u670d\u52a1\u5668\u5b57\u4f53",level:3},{value:"11. \u7b80\u5355\u6392\u67e5java\u7a0b\u5e8f",id:"11-\u7b80\u5355\u6392\u67e5java\u7a0b\u5e8f",level:3}];function o(n){const e={code:"code",h3:"h3",p:"p",pre:"pre",...(0,l.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"linux\u5e38\u7528\u547d\u4ee4"}),"\n",(0,a.jsx)(e.h3,{id:"1-\u89e3\u538b\u6253\u5305",children:"1. \u89e3\u538b\u6253\u5305"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u89e3\u538b\uff1atar xvf aaa.tar\n\u538b\u7f29\uff1atar zcvf /data/soft/shp.tar.gz /data/soft/dxf/ --exclude=*.zip\t\t# \u8fc7\u6ee4zip\u6587\u4ef6\n"})}),"\n",(0,a.jsx)(e.h3,{id:"2-\u67e5\u770b\u65e5\u5fd7",children:"2. \u67e5\u770b\u65e5\u5fd7"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"tail -f log.log \u52a8\u6001\u67e5\u770b\u65e5\u5fd7 \ntail -f log.log | grep 'Bi\\|error line\\|error'  # \u53ea\u67e5\u770b\u6307\u5b9a\u5185\u5bb9 \u65e5\u5fd7\ntail -f log.log | grep -Ev '(DownloadTask|DownloadExec|wms)' # \u4e0d\u770b\u6307\u5b9a\u5185\u5bb9\u7684\u65e5\u5fd7 \n"})}),"\n",(0,a.jsx)(e.h3,{id:"3-\u67e5\u770b\u7cfb\u7edf\u4fe1\u606f",children:"3. \u67e5\u770b\u7cfb\u7edf\u4fe1\u606f"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"cat /proc/version //\u6216\u8005\ncat /etc/redhat-release\n\n\u67e5\u770b\u7cfb\u7edf\u652f\u6301\u7684\u7f16\u7801:iconv -l\n"})}),"\n",(0,a.jsx)(e.h3,{id:"4-\u4fee\u6539\u65f6\u95f4",children:"4. \u4fee\u6539\u65f6\u95f4"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'date -s "4/30/2018 10:00"\n'})}),"\n",(0,a.jsx)(e.h3,{id:"5-\u7528\u6237",children:"5. \u7528\u6237"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u521b\u5efa\uff1aadduser es\n\u8bbe\u7f6e\u5bc6\u7801\uff1apasswd es\n\u76ee\u5f55\u6743\u9650\uff1achown -R es:es /data\n"})}),"\n",(0,a.jsx)(e.h3,{id:"6-\u7aef\u53e3",children:"6. \u7aef\u53e3"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u67e5\u770b\u8fdb\u7a0b\u7aef\u53e3\uff1anetstat -nap|grep 13000\n\u67e5\u770b\u7aef\u53e3\u5360\u7528\uff1alsof -i:5432\n"})}),"\n",(0,a.jsx)(e.h3,{id:"7-\u6587\u4ef6",children:"7. \u6587\u4ef6"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'\u7edf\u8ba1\u6587\u4ef6\u4e2a\u6570\uff1a\n\tls -l|grep "^-"|wc -l\n\u67e5\u8be2\u67d0\u6587\u4ef6\u884c\u6570\uff1a\n\twc -l \u6587\u4ef6\u540d\n\u67e5\u627e\u6587\u4ef6/\u76ee\u5f55\uff1a\n\tfind . \u2013type d \u2013name zxwinmo-b-support-zgis-web\n\u627e\u51fa\u5927\u4e8e 3000k\u7684\u6587\u4ef6\u5e76\u5220\u9664\uff1a\n\tfind . -type f -size +1000k|xargs rm -rf\n\u7edf\u8ba1\u6587\u4ef6\u4e2d\u67d0\u4e2a\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\uff1a\n\tgrep -o "\u5b57\u7b26" \u6587\u4ef6\u540d | wc -l\n\u6587\u4ef6\u592a\u591a\u5220\u9664\u4e0d\u4e86\u65f6\uff08/bin/rm: argument list too long\uff09\uff1a\n\tls | xargs -n 9 rm -rf\n\u67e5\u770b\u76ee\u5f55\u603b\u5927\u5c0f:\n\tdu -sh /data6/\n\n\u8f6f\u8fde\u63a5:\n\tln -s \u6e90\u76ee\u6807\u6587\u4ef6  \u8f6f\u94fe\u6587\u4ef6\n\n\u5168\u5c40\u66ff\u6362\uff1a\n\tsed -i "s/str1/str2/g" test.txt\t# \u5c06str1\u66ff\u6362\u6210str2\u3002-i\u8868\u793a\u4fee\u6539\u6587\u4ef6\uff1bs\u8868\u793a\u66ff\u6362\uff1bg\u8868\u793a\u5168\u5c40\n\n\u4ece\u8fdc\u7a0b\u4e0b\u8f7d\u6587\u4ef6\uff1a\n\tscp xx.xx.xx.xx:/data6/xxx.tar.gz  .\n\u4e0a\u4f20\u6587\u4ef6\u5230\u8fdc\u7a0b\uff1a\n\tscp \u672c\u5730\u6587\u4ef6 10.9.224.116:/data6/\n'})}),"\n",(0,a.jsx)(e.h3,{id:"8-\u9632\u706b\u5899",children:"8. \u9632\u706b\u5899"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u67e5\u8be2\u9ed8\u8ba4\u533a\u57df\uff1a\n\tfirewall-cmd --get-default-zone\n\u54ea\u4e2a\u533a\u57df\u5904\u4e8e\u6fc0\u6d3b\u72b6\u6001\uff1a\n\tfirewall-cmd --get-active-zones\n\u914d\u7f6e IP \u767d\u540d\u5355\uff1a\n\tfirewall-cmd --permanent --zone=trusted --add-source=x.x.x.0/24\n\tfirewall-cmd --reload\n\u786e\u8ba4 trusted \u533a\u57df\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\uff1a\n\tfirewall-cmd --zone=trusted --list-all\n\u5207\u6362\u9ed8\u8ba4\u533a\u57df\u4ece public \u5230 drop\uff1a\n\tfirewall-cmd --set-default-zone=drop\n\u5c06\u9ed8\u8ba4\u7f51\u5361 eth0 \u5206\u914d\u7ed9 drop \u533a\u57df\uff1a\n\tfirewall-cmd --permanent --zone=drop --change-interface=eth0\n\n\u4f7f\u767d\u540d\u5355\u6700\u7ec8\u751f\u6548\uff1a\n\tfirewall-cmd --reload\n\n\u6dfb\u52a0\u5f00\u653e\u7aef\u53e3\uff0c\u4e0d\u7528reload\n\t\tfirewall-cmd --add-port=8080/tcp\n\u67e5\u770b\u5f00\u653e\u7aef\u53e3\n\t\t firewall-cmd --list-ports\n"})}),"\n",(0,a.jsx)(e.h3,{id:"9-curl",children:"9. curl"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'curl -X POST "127.0.0.1:8081/aaa/uploadFile" \\\n-F "appName=ngi-support-init" \\\n-F "appVersionNo=01.01.02.00.n01" \\ \n-F "filename=@/data/tempData/data.zip" \\\n-H "Cookie:CODE-8081=822211804_0b8d139a97894defaed57a0c09e530a5;sessionid=822211804_0b8d139a97894defaed57ac09e530a5"  \n--referer https://10.231.43.190:14290/webgis/map.htm\n'})}),"\n",(0,a.jsx)(e.h3,{id:"10-\u670d\u52a1\u5668\u5b57\u4f53",children:"10. \u670d\u52a1\u5668\u5b57\u4f53"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u7b2c\u4e00\u6b65\uff1a\u5728/usr/share/fonts\u76ee\u5f55\u4e0b\u5efa\u7acb\u4e00\u4e2a\u5b50\u76ee\u5f55\uff0c\u4f8b\u5982chinese\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a\n# mkdir /usr/share/fonts/chinese\n\n\u7b2c\u4e8c\u6b65\uff1a\u5c06\u5b57\u4f53\u6587\u4ef6\u590d\u5236\u5230\u8be5\u76ee\u5f55\u4e0b\uff0c\u4f8b\u5982\u8fd9\u4e24\u4e2a\u6587\u4ef6\u653e\u5728/root/desktop\u4e0b\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a\n# cd /root/desktop\n# cp font.ttf /usr/share/fonts/chinese/\n\n\u7b2c\u4e09\u6b65\uff1a\u5efa\u7acb\u5b57\u4f53\u7d22\u5f15\u4fe1\u606f\uff0c\u66f4\u65b0\u5b57\u4f53\u7f13\u5b58\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a\n# cd /usr/share/fonts/chinese\n# mkfontscale\n# mkfontdir\n# fc-cache\n"})}),"\n",(0,a.jsx)(e.h3,{id:"11-\u7b80\u5355\u6392\u67e5java\u7a0b\u5e8f",children:"11. \u7b80\u5355\u6392\u67e5java\u7a0b\u5e8f"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'top -c  \t\t\t\t\t\t\t\u67e5\u770bCPU\u4f7f\u7528\u6700\u9ad8\u7684\u8fdb\u7a0bpid\ntop -H -p pid\t\t\t\t\t\t\u67e5\u8be2\u4e0a\u8ff0\u8fdb\u7a0b\u7684 \u4f7f\u7528cpu\u6700\u9ad8\u7ebf\u7a0b pid,\u628a\u8be5pid\u8f6c\u621016\u8fdb\u5236\nprintf "%x\\n" pid \t\t\t\t\t\u8f6c16\u8fdb\u5236\njstack 20835|grep 5163 -A 30\t\t\u627e\u5230\u8be5\u7ebf\u7a0b\u6b63\u5728\u505a\u4ec0\u4e48\uff0c\u53ef\u4ee5\u627e\u51fa\u8be5\u7ebf\u7a0b\u5bf9\u5e94\u7684java \u65b9\u6cd5\n\n\u627e\u5230java\u7684pid\u540e \u67e5\u770b\u7ebf\u7a0b\u76f8\u5173\u7684\njstack -l 63|grep gis\n\n\u67e5\u770b\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\nfree -g\n\njps\t\u67e5\u770b\u6240\u6709java\u8fdb\u7a0b\uff0c\u8f93\u51faJVM\u4e2d\u8fd0\u884c\u7684\u8fdb\u7a0b\u72b6\u6001\u4fe1\u606f\n-m\t\u8f93\u51fa\u4f20\u5165main\u65b9\u6cd5\u7684\u53c2\u6570\n-l\t\u8f93\u51famain\u7c7b\u6216Jar\u7684\u5168\u9650\u540d\n=============================================================================================\n\u67e5\u770bgc\n\u76d1\u63a7jvm\uff0c\u6bcf5\u79d2\u6253\u5370\u4e00\u6b21\uff0c\u5faa\u73af100\u6b21\ngcutil/gc\njstat -gcutil 33 1000 100\nS0C\uff1a\u7b2c\u4e00\u4e2a\u5e78\u5b58\u533a\u7684\u5927\u5c0f\nS1C\uff1a\u7b2c\u4e8c\u4e2a\u5e78\u5b58\u533a\u7684\u5927\u5c0f\nS0U\uff1a\u7b2c\u4e00\u4e2a\u5e78\u5b58\u533a\u7684\u4f7f\u7528\u5927\u5c0f\nS1U\uff1a\u7b2c\u4e8c\u4e2a\u5e78\u5b58\u533a\u7684\u4f7f\u7528\u5927\u5c0f\nEC\uff1a\u4f0a\u7538\u56ed\u533a\u7684\u5927\u5c0f\nEU\uff1a\u4f0a\u7538\u56ed\u533a\u7684\u4f7f\u7528\u5927\u5c0f\nOC\uff1a\u8001\u5e74\u4ee3\u5927\u5c0f\nOU\uff1a\u8001\u5e74\u4ee3\u4f7f\u7528\u5927\u5c0f\nMC\uff1a\u65b9\u6cd5\u533a\u5927\u5c0f\nMU\uff1a\u65b9\u6cd5\u533a\u4f7f\u7528\u5927\u5c0f\nCCSC:\u538b\u7f29\u7c7b\u7a7a\u95f4\u5927\u5c0f\nCCSU:\u538b\u7f29\u7c7b\u7a7a\u95f4\u4f7f\u7528\u5927\u5c0f\nYGC\uff1a\u5e74\u8f7b\u4ee3\u5783\u573e\u56de\u6536\u6b21\u6570\nYGCT\uff1a\u5e74\u8f7b\u4ee3\u5783\u573e\u56de\u6536\u6d88\u8017\u65f6\u95f4\nFGC\uff1a\u8001\u5e74\u4ee3\u5783\u573e\u56de\u6536\u6b21\u6570\nFGCT\uff1a\u8001\u5e74\u4ee3\u5783\u573e\u56de\u6536\u6d88\u8017\u65f6\u95f4\nGCT\uff1a\u5783\u573e\u56de\u6536\u6d88\u8017\u603b\u65f6\u95f4\n=============================================================================================\n\u67e5\u770b\u5806\njmap -histo 21 | head -n 20 // pid\u662f\u8fdb\u7a0b\u53f7\uff0c20\u8868\u793a\u6392\u540d\u524d\u4e8c\u5341\uff0cinstances\u8868\u793a\u5b9e\u4f8b\u6570\u91cf\uff0cbytes\u8868\u793a\u5360\u7528\u5185\u5b58\u5927\u5c0f\n num     #instances         #bytes  class name\n----------------------------------------------\n   1:     156859803     7603445776  [C\n   2:     150807729     3619385496  java.lang.String\n   3:        260011     1602048120  [I\n   ...\n=============================================================================================\njmat\u5bfc\u51fa\u5185\u5b58\u5bf9\u8c61 \u628ajava\u7684\u5806\u4ee5hprof \u4e8c\u8fdb\u5236\u683c\u5f0f\u8f93\u51fa\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u901a\u8fc7jhat\u6216\u5176\u4ed6\u5de5\u5177\u6765\u67e5\u770b\njmap -dump:format=b,file=dump.hprof pid\n\njhat dump.hprof\n\n\u67e5\u8be2java\u5e94\u7528\u5185\u5b58\u4f7f\u7528\n\tjmap -heap 44\n'})})]})}function p(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(o,{...n})}):o(n)}},79779:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>d});var a=t(79474);const l={},r=a.createContext(l);function i(n){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),a.createElement(r.Provider,{value:e},n.children)}}}]);