"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[8779],{38347:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var s=n(13274),a=n(79779);const r={slug:"junit-springboot",title:"junit\u6d4b\u8bd5\u63a5\u53e3",date:new Date("2023-04-28T00:00:00.000Z"),authors:"yuchengee",tags:["springboot","junit","\u6d4b\u8bd5"]},i=void 0,o={permalink:"/blog/junit-springboot",editUrl:"https://github.com/yuchengee/blog/edit/master/blog/2023/04-28-junit\u6d4b\u8bd5\u63a5\u53e3.md",source:"@site/blog/2023/04-28-junit\u6d4b\u8bd5\u63a5\u53e3.md",title:"junit\u6d4b\u8bd5\u63a5\u53e3",description:"junit\u6d4b\u8bd5\u63a5\u53e3",date:"2023-04-28T00:00:00.000Z",formattedDate:"2023\u5e744\u670828\u65e5",tags:[{label:"springboot",permalink:"/blog/tags/springboot"},{label:"junit",permalink:"/blog/tags/junit"},{label:"\u6d4b\u8bd5",permalink:"/blog/tags/\u6d4b\u8bd5"}],readingTime:1.0933333333333333,hasTruncateMarker:!0,authors:[{name:"yuchengee",title:"\u5e9f\u54c1\u5de5\u7a0b\u5e08",url:"https://github.com/yuchengee",imageURL:"/img/logo.png",key:"yuchengee"}],frontMatter:{slug:"junit-springboot",title:"junit\u6d4b\u8bd5\u63a5\u53e3",date:"2023-04-28T00:00:00.000Z",authors:"yuchengee",tags:["springboot","junit","\u6d4b\u8bd5"]},unlisted:!1,prevItem:{title:"geotools\u5feb\u901f\u5f00\u59cb",permalink:"/blog/geotools-start"},nextItem:{title:"java\u8c03\u7528chatgpt",permalink:"/blog/java-request-chatgpt"}},l={authorsImageUrls:[void 0]},c=[{value:"\u9996\u5148\u4f7f\u7528\u7684\u4f9d\u8d56",id:"\u9996\u5148\u4f7f\u7528\u7684\u4f9d\u8d56",level:3},{value:"application/json\u63a5\u53e3",id:"applicationjson\u63a5\u53e3",level:3},{value:"formdata\uff0c\u9700\u8981\u4f7f\u7528session\u7684\u63a5\u53e3",id:"formdata\u9700\u8981\u4f7f\u7528session\u7684\u63a5\u53e3",level:3},{value:"\u9700\u8981\u4e0a\u4f20\u6587\u4ef6\u7684\u63a5\u53e3",id:"\u9700\u8981\u4e0a\u4f20\u6587\u4ef6\u7684\u63a5\u53e3",level:3}];function p(t){const e={code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"junit\u6d4b\u8bd5\u63a5\u53e3"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u4f7f\u7528springboot\u5f00\u53d1web\u5e94\u7528\u65f6\uff0c\u901a\u5e38\u9700\u8981\u5199\u6d4b\u8bd5\u7528\u4f8b\uff0c\u6765\u4fdd\u8bc1\u4ee3\u7801\u7684\u8d28\u91cf\u3002\u5f53\u6211\u4eec\u5f00\u53d1\u4e00\u4e2aweb\u63a5\u53e3\u540e\uff0c\u5f00\u53d1\u4eba\u5458\u9700\u8981\u4f7f\u7528junit\u5bf9\u8be5\u63a5\u53e3\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5373\u81ea\u6d4b\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"\u9996\u5148\u4f7f\u7528\u7684\u4f9d\u8d56",children:"\u9996\u5148\u4f7f\u7528\u7684\u4f9d\u8d56"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"<dependency>\n\t<groupId>org.springframework.boot</groupId>\n\t<artifactId>spring-boot-starter-test</artifactId>\n\t<scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\u662f\u6d4b\u8bd5\u63a5\u53e3\u7684\u4ee3\u7801"}),"\n",(0,s.jsx)(e.h3,{id:"applicationjson\u63a5\u53e3",children:"application/json\u63a5\u53e3"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@SpringBootTest\npublic class AreaManageControllerTest {\n    @Autowired\n    private WebApplicationContext webApplicationContext;\n\t// \u6d4b\u8bd5\u6570\u636e\u7684\u4ee3\u7801\u76ee\u5f55 \u9879\u76ee/test/resources/data/\n\tprivate static final String dataPath = ClassLoader.getSystemClassLoader().getResource("data").getPath() + File.separator;\n    private MockMvc mockMvc;\n\n    @BeforeEach\n    public void setUp() {\n        //\u4f7f\u7528\u4e0a\u4e0b\u6587\u6784\u5efaMockMvc\n        mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();\n    }\n\n\t// json\u8bf7\u6c42\n    @Test\n    public void testUser() throws Exception {\n        MvcResult mvcResult = mockMvc.perform(MockMvcRequestBuilders.post("/user")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content("{" +\n                        "    \\"age\\": 18," +\n                        "    \\"name\\": \\"xxx\\"" +\n                        "}")).andReturn();\n        Assertions.assertEquals("0", JSON.parseObject(mvcResult.getResponse().getContentAsString()).getString("retcode"));\n    }\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"formdata\u9700\u8981\u4f7f\u7528session\u7684\u63a5\u53e3",children:"formdata\uff0c\u9700\u8981\u4f7f\u7528session\u7684\u63a5\u53e3"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'private void testUser() throws Exception {\n\t\tMockHttpSession session = new MockHttpSession();\n\t\tMultiValueMap<String, String> params = new LinkedMultiValueMap<>();\n        params1.add("name", "xx");\n        params1.add("age", "11");\n        long l = System.currentTimeMillis();\n        MvcResult mvcResult = mockMvc.perform(MockMvcRequestBuilders.post("/user")\n                .params(params).session(session)).andReturn();\n        System.out.print("cost:" + (System.currentTimeMillis() - l)+"ms");\n        // \u83b7\u53d6\u8fd4\u56de\u7ed3\u679c\n        String result = JSON.parseObject(mvcResult.getResponse().getContentAsString()).get("Result").toString();\n        Assertions.assertEquals("Success", result);\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u9700\u8981\u4e0a\u4f20\u6587\u4ef6\u7684\u63a5\u53e3",children:"\u9700\u8981\u4e0a\u4f20\u6587\u4ef6\u7684\u63a5\u53e3"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Test\n    public void testGetLayerInfo() throws Exception {\n        // \u4e0a\u4f20\u666e\u901a\u6587\u4ef6\n        InputStream inputStream1 = new FileInputStream(testPath + "a.txt");\n        InputStream inputStream2 = new FileInputStream(testPath + "b.png");\n        InputStream inputStream3 = new FileInputStream(testPath + "c.csv");\n        InputStream inputStream4 = new FileInputStream(testPath + "d.zip");\n        MvcResult mvcResult = mockMvc.perform(\n                MockMvcRequestBuilders\n                        .multipart("/upload")\n                        .file(new MockMultipartFile("files", "a.txt", "multipart/form-data", inputStream1))\n                        .file(new MockMultipartFile("files", "b.png", "multipart/form-data", inputStream2))\n                        .file(new MockMultipartFile("files", "c.csv", "multipart/form-data", inputStream3))\n                        .file(new MockMultipartFile("files", "d.zip", "multipart/form-data", inputStream4))\n                        .param("name", "aaa")\n                        .param("age", "21")\n        ).andReturn();\n        String result = JSON.parseObject(mvcResult.getResponse().getContentAsString()).get("Result").toString();\n        Assertions.assertEquals("Success", result);\n    }\n'})})]})}function u(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(p,{...t})}):p(t)}},79779:(t,e,n)=>{n.d(e,{R:()=>i,x:()=>o});var s=n(79474);const a={},r=s.createContext(a);function i(t){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function o(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:i(t.components),s.createElement(r.Provider,{value:e},t.children)}}}]);