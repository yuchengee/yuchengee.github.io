"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5141],{21750:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var r=t(13274),a=t(79779);const s={slug:"kafka-useage",title:"kafka\u5b89\u88c5\u4e0e\u7b80\u5355\u4f7f\u7528",date:new Date("2023-02-27T00:00:00.000Z"),authors:"yuchengee",tags:["kafka","\u4e2d\u95f4\u4ef6","\u5206\u5e03\u5f0f"],keywords:["kafka","\u4e2d\u95f4\u4ef6","\u5206\u5e03\u5f0f"]},o=void 0,i={permalink:"/blog/kafka-useage",editUrl:"https://github.com/yuchengee/blog/edit/master/blog/2023/02-27-kafka.md",source:"@site/blog/2023/02-27-kafka.md",title:"kafka\u5b89\u88c5\u4e0e\u7b80\u5355\u4f7f\u7528",description:"kafka\u5b89\u88c5\u4e0e\u7b80\u5355\u4f7f\u7528",date:"2023-02-27T00:00:00.000Z",formattedDate:"2023\u5e742\u670827\u65e5",tags:[{label:"kafka",permalink:"/blog/tags/kafka"},{label:"\u4e2d\u95f4\u4ef6",permalink:"/blog/tags/\u4e2d\u95f4\u4ef6"},{label:"\u5206\u5e03\u5f0f",permalink:"/blog/tags/\u5206\u5e03\u5f0f"}],readingTime:1.4133333333333333,hasTruncateMarker:!0,authors:[{name:"yuchengee",title:"\u5e9f\u54c1\u5de5\u7a0b\u5e08",url:"https://github.com/yuchengee",imageURL:"/img/logo.png",key:"yuchengee"}],frontMatter:{slug:"kafka-useage",title:"kafka\u5b89\u88c5\u4e0e\u7b80\u5355\u4f7f\u7528",date:"2023-02-27T00:00:00.000Z",authors:"yuchengee",tags:["kafka","\u4e2d\u95f4\u4ef6","\u5206\u5e03\u5f0f"],keywords:["kafka","\u4e2d\u95f4\u4ef6","\u5206\u5e03\u5f0f"]},unlisted:!1,prevItem:{title:"java\u9632\u5fa1zip\u538b\u7f29\u5305\u70b8\u5f39",permalink:"/blog/java-upload-zip"},nextItem:{title:"linux\u5e38\u7528\u547d\u4ee4",permalink:"/blog/linux-cmd-useage"}},c={authorsImageUrls:[void 0]},l=[{value:"1. \u5355\u673a",id:"1-\u5355\u673a",level:3},{value:"2. \u96c6\u7fa4",id:"2-\u96c6\u7fa4",level:3}];function k(e){const n={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"kafka\u5b89\u88c5\u4e0e\u7b80\u5355\u4f7f\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["\u53c2\u8003 ",(0,r.jsx)(n.a,{href:"https://blog.csdn.net/u010889616/article/details/80641922",children:"https://blog.csdn.net/u010889616/article/details/80641922"})]}),"\n",(0,r.jsx)(n.h3,{id:"1-\u5355\u673a",children:"1. \u5355\u673a"}),"\n",(0,r.jsxs)(n.p,{children:["\u5b89\u88c5\u5305\uff1a",(0,r.jsx)(n.a,{href:"https://kafka.apache.org/downloads",children:"https://kafka.apache.org/downloads"})]}),"\n",(0,r.jsx)(n.p,{children:"\u89e3\u538b\uff1atar xvf kafka_2.12-3.3.1.tgz"}),"\n",(0,r.jsx)(n.p,{children:"\u521b\u5efa\u6570\u636e\u76ee\u5f55\uff1a/usr/local/kafka/logs"}),"\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u914d\u7f6e: vim config/server.properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"broker.id=1\nlisteners=PLAINTEXT://:9092\n# \u5bf9\u5916\u76ee\u5f55\nadvertised.listeners=PLAINTEXT://xx.xx.xx.xx:9092\nlog.dirs=/usr/local/kafka/logs\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u542f\u52a8zk:\nbin/zookeeper-server-start.sh -daemon config/zookeeper.properties"}),"\n",(0,r.jsx)(n.p,{children:"\u542f\u52a8kafka"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u524d\u7aef\u542f\u52a8\nbin/kafka-server-start.sh config/server.properties\n# \u540e\u7aef\u542f\u52a8\nbin/kafka-server-start.sh -daemon config/server.properties\n# \u505c\u6b62\nbin/kafka-server-stop.sh\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u67e5\u770b topic \u5217\u8868\nbin/kafka-topics.sh --list --bootstrap-server localhost:9092\n\n# \u521b\u5efatopic\nbin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test1\n# partitions:kafka\u5206\u533a\u6570\u91cf\uff0c\u9ed8\u8ba41\n# replication-factor\uff1a\u5206\u533a\u7684\u590d\u5236\u56e0\u5b50\u6570\u91cf\uff0c\u9ed8\u8ba41\n\n# \u5220\u9664\u4e3b\u9898\nbin/kafka-topics.sh --delete --bootstrap-server localhost:9092 --topic test1\n\n# \u67e5\u770btopic\u63cf\u8ff0\u60c5\u51b5\nbin/kafka-topics.sh --describe --topic test1 --bootstrap-server localhost:9092\n\n# \u521b\u5efa\u751f\u4ea7\u8005\nbin/kafka-console-producer.sh --broker-list localhost:9092 --topic test1\n\n# \u521b\u5efa\u6d88\u8d39\u8005\nbin/kafka-console-consumer.sh --topic test1 --from-beginning --bootstrap-server localhost:9092\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u96c6\u7fa4",children:"2. \u96c6\u7fa4"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528docker\u8fdb\u884c\u642d\u5efakafka\u96c6\u7fa4\u3002"}),"\n",(0,r.jsx)(n.p,{children:"docker\u4f9d\u8d56zk\uff0c\u6240\u4ee5\u9700\u8981\u5148\u642d\u5efazk\u96c6\u7fa4\u3002"}),"\n",(0,r.jsx)(n.p,{children:"zk\u96c6\u7fa4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"#\u4e0b\u8f7dzk\u5b89\u88c5\u5305\uff0c\u5206\u522b\u57283\u4e2a\u673a\u5668\u4e0a\u5b89\u88c5zk\uff0c\u5f62\u6210zk\u96c6\u7fa4\n\n# \u89e3\u538b\u540e\uff0c\u5206\u522b\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 zoo.cfg\nserver.1=x.x.x.x:2888:3888\nserver.2=x.x.x.x:2888:3888\nserver.3=x.x.x.x:2888:3888\n\n# \u5206\u522b\u521b\u5efa\u5982\u4e0b\u6587\u4ef6\necho 1 > /tmp/zookeeper/myid\necho 2 > /tmp/zookeeper/myid\necho 3 > /tmp/zookeeper/myid\n\n# \u5206\u522b\u542f\u52a8\u540e\u5f62\u6210\u96c6\u7fa4\nbin/zkServer.sh start\n\n# \u67e5\u770b\u8282\u70b9\u72b6\u6001\uff08leader/follower\uff09\nbin/zkServer.sh status\n"})}),"\n",(0,r.jsx)(n.p,{children:"kafka\u96c6\u7fa4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u542f\u52a83\u4e2a\u5bb9\u5668\u4f5c\u4e3akafka\u8282\u70b9\uff0c\u5176\u4e2d openjdk18\u662f\u542b\u6709jdk8\u7684\u955c\u50cf\ndocker run -it --name kafka1 -v /data6/cyu/testdata/:/data/ -p 9093:9093 openjdk18:v1.0\ndocker run -it --name kafka2 -v /data6/cyu/testdata/:/data/ -p 9094:9094 openjdk18:v1.0\ndocker run -it --name kafka3 -v /data6/cyu/testdata/:/data/ -p 9095:9095 openjdk18:v1.0\n\n# \u5206\u522b\u4fee\u6539\u914d\u7f6e config/server.properties\nbroker.id=1\nbroker.id=2\nbroker.id=3\n\nlisteners=PLAINTEXT://:9093\nlisteners=PLAINTEXT://:9094\nlisteners=PLAINTEXT://:9095\n\nadvertised.listeners=PLAINTEXT://x.x.x.x:9093   # \u8fd9\u91cc\u9700\u8981\u6539\u4e3a \u5916\u90e8\u53ef\u4ee5\u8bbf\u95ee\u5230\u7684 ip\u5730\u5740\nadvertised.listeners=PLAINTEXT://x.x.x.x:9094\nadvertised.listeners=PLAINTEXT://x.x.x.x:9095\n\nzookeeper.connect=x.x.x.x:2181,x.x.x.x:2181,x.x.x.x:2181\n\n# \u5206\u522b\u542f\u52a8\nbin/kafka-server-start.sh -daemon config/server.properties\n\n# topic\u4e3b\u9898\nbin/kafka-topics.sh --create --bootstrap-server x.x.x.x:9093 --replication-factor 1 --partitions 1 --topic test1\nbin/kafka-topics.sh --list --bootstrap-server x.x.x.x:9093\n\n# \u751f\u4ea7\u8005\nbin/kafka-console-producer.sh --broker-list x.x.x.x:9093 --topic test1\n\n# \u6d88\u8d39\u8005\nbin/kafka-console-consumer.sh --topic test1 --from-beginning --bootstrap-server x.x.x.x:9093\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(k,{...e})}):k(e)}},79779:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(79474);const a={},s=r.createContext(a);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);