"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7482],{34780:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>s,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(13274),i=n(79779);const r={slug:"java-zip-wr",title:"java\u8bfb\u5199zip\u538b\u7f29\u5305",date:new Date("2023-06-01T00:00:00.000Z"),authors:"yuchengee",tags:["java","io","zip"]},p=void 0,l={permalink:"/blog/java-zip-wr",editUrl:"https://github.com/yuchengee/blog/edit/master/blog/2023/06-01-java\u8bfb\u5199zip\u538b\u7f29\u5305.md",source:"@site/blog/2023/06-01-java\u8bfb\u5199zip\u538b\u7f29\u5305.md",title:"java\u8bfb\u5199zip\u538b\u7f29\u5305",description:"zip\u538b\u7f29\u662f\u4e00\u79cd\u5e38\u7528\u7684\u6587\u4ef6\u538b\u7f29\u65b9\u5f0f\uff0c\u7ecf\u5e38\u9700\u8981\u4f7f\u7528\u8fd9\u79cd\u6587\u4ef6\u6765\u4f20\u8f93\u548c\u5b58\u50a8\u4fe1\u606f\u3002",date:"2023-06-01T00:00:00.000Z",formattedDate:"2023\u5e746\u67081\u65e5",tags:[{label:"java",permalink:"/blog/tags/java"},{label:"io",permalink:"/blog/tags/io"},{label:"zip",permalink:"/blog/tags/zip"}],readingTime:1.0433333333333332,hasTruncateMarker:!0,authors:[{name:"yuchengee",title:"\u5e9f\u54c1\u5de5\u7a0b\u5e08",url:"https://github.com/yuchengee",imageURL:"/img/logo.png",key:"yuchengee"}],frontMatter:{slug:"java-zip-wr",title:"java\u8bfb\u5199zip\u538b\u7f29\u5305",date:"2023-06-01T00:00:00.000Z",authors:"yuchengee",tags:["java","io","zip"]},unlisted:!1,prevItem:{title:"lucene\u7b80\u5355\u4f7f\u7528",permalink:"/blog/java-lucene-search"},nextItem:{title:"java\u4e2dFuture\u7528\u6cd5",permalink:"/blog/java-future-thread"}},o={authorsImageUrls:[void 0]},c=[{value:"\u8bfb\u538b\u7f29\u5305",id:"\u8bfb\u538b\u7f29\u5305",level:3},{value:"\u5199\u538b\u7f29\u5305",id:"\u5199\u538b\u7f29\u5305",level:3}];function u(e){const t={code:"code",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"zip\u538b\u7f29\u662f\u4e00\u79cd\u5e38\u7528\u7684\u6587\u4ef6\u538b\u7f29\u65b9\u5f0f\uff0c\u7ecf\u5e38\u9700\u8981\u4f7f\u7528\u8fd9\u79cd\u6587\u4ef6\u6765\u4f20\u8f93\u548c\u5b58\u50a8\u4fe1\u606f\u3002"}),"\n",(0,a.jsx)(t.p,{children:"\u672c\u6587\u8bb0\u5f55java\u4e2d\u8bfb\u5199zip\u538b\u7f29\u5305\u7684\u65b9\u5f0f\u3002"}),"\n",(0,a.jsx)(t.h3,{id:"\u8bfb\u538b\u7f29\u5305",children:"\u8bfb\u538b\u7f29\u5305"}),"\n",(0,a.jsx)(t.p,{children:"\u8bfb\u53d6\u6587\u672c"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'public static List<String> readDataFromZip(File zipFile, String entryKey) {\n        List<String> lines = new ArrayList<>();\n        if (!zipFile.exists()) return lines;\n        try (ZipFile zf = new ZipFile(zipFile);\n             BufferedReader br = new BufferedReader(new InputStreamReader(zf.getInputStream(new ZipEntry(entryKey)), StandardCharsets.UTF_8))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                lines.add(line);\n            }\n            return lines;\n        } catch (ZipException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n}\n\nList<String> data = readDataFromZip(new File("/data/data.zip"), "1/2.txt");\n'})}),"\n",(0,a.jsx)(t.p,{children:"\u8bfb\u53d6\u56fe\u7247"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'public static BufferedImage readImageFromZip(File zipFile, String tileKey) {\n        if (!zipFile.exists()) return null;\n        try (ZipFile zf = new ZipFile(zipFile)) {\n            ZipEntry entry = zf.getEntry(tileKey);\n            return ImageIO.read(zf.getInputStream(entry));\n        } catch (ZipException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n}\n\nBufferedImage bufferedImage = readImageFromZip(new File("/data/img.zip"), "16/51701-26893.png");\n'})}),"\n",(0,a.jsx)(t.h3,{id:"\u5199\u538b\u7f29\u5305",children:"\u5199\u538b\u7f29\u5305"}),"\n",(0,a.jsx)(t.p,{children:"\u5199\u6587\u672c"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'public static void writeDataToZip(List<String> datas, String zipPath) {\n        try (ZipOutputStream out = new ZipOutputStream(new FileOutputStream(CfgManager.checkUpPathStr(zipPath)), StandardCharsets.UTF_8);\n             BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(out, StandardCharsets.UTF_8))) {\n            out.putNextEntry(new ZipEntry("data" + File.separator + "1"));\n            for (String data : datas) {\n                bw.write(data);\n                bw.newLine();\n            }\n            bw.flush();\n            out.flush();\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n}\n\n\twriteDataToZip(Lists.newArrayList("aaaa", "bbb"), "/data/a.zip");\n'})}),"\n",(0,a.jsx)(t.p,{children:"\u5199\u56fe\u7247"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:' public static void writeImgToZip(BufferedImage image, String zipPath) {\n        try (ZipOutputStream out = new ZipOutputStream(new FileOutputStream(CfgManager.checkUpPathStr(zipPath)), StandardCharsets.UTF_8)) {\n            out.putNextEntry(new ZipEntry("data" + File.separator + "aa.png"));\n            ImageIO.write(image, "png", out);\n            out.flush();\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n }\n\n\tBufferedImage imgage = ImageIO.read(new File("/data/aa.png"));\n\twriteImgToZip(imgage, "/data/img.zip");\n'})})]})}function s(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},79779:(e,t,n)=>{n.d(t,{R:()=>p,x:()=>l});var a=n(79474);const i={},r=a.createContext(i);function p(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:p(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);