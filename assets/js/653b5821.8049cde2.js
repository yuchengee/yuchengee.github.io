"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2663],{21950:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>i});var a=n(13274),r=n(79779);const l={slug:"java-call-cmd",title:"java\u8c03\u7528\u811a\u672c",date:new Date("2023-07-07T00:00:00.000Z"),authors:"yuchengee",tags:["java","linux","shell"]},s=void 0,o={permalink:"/blog/java-call-cmd",editUrl:"https://github.com/yuchengee/blog/edit/master/blog/2023/07-07-java\u8c03\u7528\u811a\u672c.md",source:"@site/blog/2023/07-07-java\u8c03\u7528\u811a\u672c.md",title:"java\u8c03\u7528\u811a\u672c",description:"\u5728Java\u7f16\u7a0b\u4e2d\uff0c\u6709\u65f6\u4f1a\u9047\u5230\u9700\u8981\u8c03\u7528\u7cfb\u7edf\u7684shell\u811a\u672c\u7684\u60c5\u51b5\uff0c\u672c\u6587\u8bb0\u5f55java\u8c03\u7528\u811a\u672c\u793a\u4f8b\u3002",date:"2023-07-07T00:00:00.000Z",formattedDate:"2023\u5e747\u67087\u65e5",tags:[{label:"java",permalink:"/blog/tags/java"},{label:"linux",permalink:"/blog/tags/linux"},{label:"shell",permalink:"/blog/tags/shell"}],readingTime:1.1333333333333333,hasTruncateMarker:!0,authors:[{name:"yuchengee",title:"\u5e9f\u54c1\u5de5\u7a0b\u5e08",url:"https://github.com/yuchengee",imageURL:"/img/logo.png",key:"yuchengee"}],frontMatter:{slug:"java-call-cmd",title:"java\u8c03\u7528\u811a\u672c",date:"2023-07-07T00:00:00.000Z",authors:"yuchengee",tags:["java","linux","shell"]},unlisted:!1,prevItem:{title:"lua\u5b66\u4e60\u4f7f\u7528-\u6570\u636e\u7ed3\u6784-\u8868-\u4e09\u4e2a\u7279\u6b8a\u51fd\u6570",permalink:"/blog/lua-study-1"},nextItem:{title:"lucene\u7b80\u5355\u4f7f\u7528",permalink:"/blog/java-lucene-search"}},c={authorsImageUrls:[void 0]},i=[];function u(e){const t={code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"\u5728Java\u7f16\u7a0b\u4e2d\uff0c\u6709\u65f6\u4f1a\u9047\u5230\u9700\u8981\u8c03\u7528\u7cfb\u7edf\u7684shell\u811a\u672c\u7684\u60c5\u51b5\uff0c\u672c\u6587\u8bb0\u5f55java\u8c03\u7528\u811a\u672c\u793a\u4f8b\u3002"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'public static boolean callShell(String... commands) {\n\tProcessBuilder pb = new ProcessBuilder();\n\ttry {\n\t\tProcessBuilder processBuilder = new ProcessBuilder(commands);\n\t\t// \u52a0\u4e0a\u4e0b\u9762\u4e24\u884c\u9632\u6b62\n\t\tprocessBuilder.redirectInput(ProcessBuilder.Redirect.PIPE); // \u91cd\u5b9a\u5411\u6807\u51c6\u8f93\u5165\u4e3a\u7a7a\u767d\n\t\tprocessBuilder.redirectOutput(ProcessBuilder.Redirect.PIPE); // \u91cd\u5b9a\u5411\u6807\u51c6\u8f93\u51fa\u5230\u7ba1\u9053\n\n\t\tProcess process = processBuilder.start();\n\n\t\tBufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n\t\tString line;\n\t\twhile ((line = reader.readLine()) != null) {\n\t\t\tSystem.out.println(line);\n\t\t}\n\t\t// \u8c03\u7528 Process.waitFor() \u65b9\u6cd5\u53ef\u4ee5\u8ba9\u5f53\u524d\u7ebf\u7a0b\u7b49\u5f85\u8fdb\u7a0b\u6267\u884c\u5b8c\u6210\uff0c\u5e76\u4e14\u83b7\u53d6\u5230\u76f8\u5e94\u7684\u9000\u51fa\u7801\u3002\u4f46\u662f\u5728\u8c03\u7528 waitFor() \u65b9\u6cd5\u4e4b\u524d\u5e94\u8be5\u5148\u8bfb\u53d6\u8fdb\u7a0b\u7684\u8f93\u51fa\uff0c\u4ee5\u514d\u5bfc\u81f4\u8fdb\u7a0b\u963b\u585e\n\t\tint exitCode = process.waitFor(); // \u7b49\u5f85Shell\u811a\u672c\u6267\u884c\u5b8c\u6210\n\t\tSystem.out.println("Shell\u811a\u672c\u6267\u884c\u7ed3\u675f\uff0c\u9000\u51fa\u7801\uff1a" + exitCode);\n\t\t// 0\uff1a\u4e00\u822c\u8868\u793a\u8fdb\u7a0b\u6267\u884c\u6210\u529f\u5e76\u6b63\u5e38\u9000\u51fa\u3002\n\t\t// \u975e\u96f6\u503c\uff1a\u901a\u5e38\u8868\u793a\u8fdb\u7a0b\u6267\u884c\u5931\u8d25\u6216\u5f02\u5e38\u7ec8\u6b62\u3002\u4e0d\u540c\u7684\u975e\u96f6\u503c\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u542b\u4e49\uff0c\u4f8b\u5982\u67d0\u79cd\u9519\u8bef\u7801\u6216\u7279\u5b9a\u7684\u72b6\u6001\u7801\n\t\treturn exitCode == 0;\n\t} catch (Exception e) {\n\t\te.printStackTrace();\n\t}\n\n\treturn false;\n}\n\ncallShell("sh", "-c", "cat aa.txt");\n'})}),"\n",(0,a.jsx)(t.p,{children:"\u5728Java\u4e2d\u8c03\u7528Shell\u811a\u672c\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5361\u4f4f\u7684\u60c5\u51b5\u3002\u8fd9\u901a\u5e38\u662f\u7531\u4e8e\u672a\u6b63\u786e\u5904\u7406\u6807\u51c6\u8f93\u5165\uff08stdin\uff09\u548c\u6807\u51c6\u8f93\u51fa\uff08stdout\uff09\u5f15\u8d77\u7684\u3002\u4e0a\u9762\u4ee3\u7801\u52a0\u5165\u91cd\u5b9a\u5411\u8f93\u5165\u8f93\u51fa\u53ef\u4ee5\u9632\u6b62\u7a0b\u5e8f\u5361\u6b7b\u3002"})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},79779:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var a=n(79474);const r={},l=a.createContext(r);function s(e){const t=a.useContext(l);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(l.Provider,{value:t},e.children)}}}]);